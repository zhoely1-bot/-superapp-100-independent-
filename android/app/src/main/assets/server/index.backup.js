const express = require("express"); const http = require("http"); const WebSocket = require("ws"); const app = express(); const server = http.createServer(app); const wss = new WebSocket.Server({ server }); const PORT = 3000; const videos = [{id:1,title:"Vidéo 1",url:"/videos/1.mp4"},{id:2,title:"Vidéo 2",url:"/videos/2.mp4"}]; app.get("/api/videos", (req,res) => res.json(videos)); wss.on("connection", ws => { console.log("Chat client connecté"); ws.on("message", msg => { console.log("Chat reçu: %s", msg); wss.clients.forEach(c => c.send(msg.toString())); }); }); server.listen(PORT, () => console.log(`API+WS sur http://localhost:${PORT}`));
